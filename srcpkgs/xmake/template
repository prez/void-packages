# Template file for 'xmake'
pkgname=xmake
version=2.7.2
revision=1
create_wrksrc=yes
build_style=gnu-makefile
make_build_args="BUILD_ARCH=${XBPS_TARGET_MACHINE}"
short_desc="Cross-platform build utility based on Lua"
maintainer="prez <prez@national.shitposting.agency>"
license="Apache-2.0"
homepage="https://xmake.io/"
distfiles="https://github.com/xmake-io/xmake/releases/download/v${version}/xmake-v${version}.tar.gz"
checksum=2d1159fd8910cd532b09315cbf7e3c8943df57f2b22952174c8cd04ba0358a14

if [ "$XBPS_TARGET_NO_ATOMIC8" ]; then
	makedepends="libatomic-devel"
	LDFLAGS="-latomic"
fi

pre_build() {
	export LD="$CC"
}
